!function e(t,a,n){function r(s,l){if(!a[s]){if(!t[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=a[s]={exports:{}};t[s][0].call(u.exports,function(e){var a=t[s][1][e];return r(a?a:e)},u,u.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=e("react"),c=n(i),u=e("react-dom"),f=n(u),d=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={start:!1,task:[],list:[{id:"1",product:"jyk",price:"100",phone:"",interval:"600000",img:"",timestamp:"",status:!1},{id:"2",product:"phone",price:"1000",phone:"",interval:"600000",img:"",timestamp:"",status:!1}]},e}return s(t,e),l(t,[{key:"handleCreateCode",value:function(e){$.post("/api/qrcode/submit",JSON.stringify(e)).done(function(t){var a=JSON.parse(t),n=a.msg,r=a.img;return"ok"===n?(e.status=!0,e.img=r,e):void alert("加载二维码错误")}).fail(function(){alert("加载二维码异常")})}},{key:"loadConfig",value:function(){var e=this;$.post("/api/qrcode/config").done(function(t){var a=JSON.parse(t),n=a.status,r=a.data;"ok"===n?e.setState({list:r}):alert("加载配置失败")}).fail(function(){alert("加载配置异常")})}},{key:"onCreateCode",value:function(e){var t=this.state.list;t[e].timestamp=(new Date).getTime();var a=this.handleCreateCode(t[e]);this.setState({list:a})}},{key:"onIntervalTask",value:function(e){var t=this.state.task;this.onCreateCode(e),t[e]=setInterval(this.onCreateCode.bind(this,e),6e4),this.setState({start:!0,task:t})}},{key:"onBatchTask",value:function(){var e=this.state.list;for(var t in e)e[t].status=!1,setTimeout(this.onIntervalTask.bind(this,t),1e3);this.setState({list:e})}},{key:"onStopTask",value:function(e){var t=this.state.task;clearInterval(t[e]),this.setState({task:t,start:!1})}},{key:"onShowConfig",value:function(e){this.setState({cur_tab:e}),this.onCreateCodeList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,n=t.start,r=n?c["default"].createElement("a",{className:"btn btn-danger btn-sm",href:"javascript:void(0);",onClick:this.onStopTask.bind(this)},c["default"].createElement("i",{className:"fa fa-stop"})," 结束"):c["default"].createElement("a",{className:"btn btn-success btn-sm",href:"javascript:void(0);",onClick:this.onBatchTask.bind(this)},c["default"].createElement("i",{className:"fa fa-play"})," 开始"),o=a.map(function(t,a){return c["default"].createElement(m,{key:a,data:t,onCreateCode:e.onCreateCode.bind(e),index:a})});return c["default"].createElement("section",{className:"wrapper"},c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-lg-12"},c["default"].createElement("section",{className:"panel row"},c["default"].createElement("div",{className:"panel-body"},c["default"].createElement("span",{className:"pull-right margin-right10",style:{marginBottom:"-5px"}},r,c["default"].createElement("a",{href:"javascript:void(0);",className:"btn btn-primary btn-sm",onClick:this.onShowConfig.bind(this)},c["default"].createElement("i",{className:"fa fa-cog fa-lg"}))))))),c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-lg-12 row"},o)))}}]),t}(c["default"].Component),m=function(e){function t(e){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={qrcode:"/img/fail.png",data:a.props.data,index:a.props.index},a}return s(t,e),l(t,[{key:"onCreateCode",value:function(e){this.props.onCreateCode(e)}},{key:"render",value:function(){var e=this.state,t=e.qrcode,a=e.index,n=e.data,r=n.product,o=n.price,s=n.img,l=n.timestamp,i=n.status,u=i?"":"disabled";return c["default"].createElement("div",{className:"col-xs-4 col-sm-2 col-lg-1 code-box"},c["default"].createElement("div",{className:"panel row"},c["default"].createElement("header",{className:"panel-heading row"},c["default"].createElement("span",{className:"pull-left"},r),c["default"].createElement("span",{className:"pull-right text-danger"},c["default"].createElement("strong",null,o))),c["default"].createElement("div",{className:"panel-body form-horizontal"},c["default"].createElement("div",{className:"form-group text-center"},c["default"].createElement("img",{src:s?s:t,className:"img-thumbnail"})),c["default"].createElement("div",{className:"form-group"},c["default"].createElement("label",{className:"control-label"},l),c["default"].createElement("div",{className:"input-group input-group-sm"},c["default"].createElement("input",{className:"form-control",type:"text",disabled:"true"}),c["default"].createElement("div",{className:"input-group-btn"},c["default"].createElement("a",{className:"btn btn-primary "+u,onClick:this.onCreateCode.bind(this,a)},"生成")))))))}}]),t}(c["default"].Component);f["default"].render(c["default"].createElement(d,null),document.getElementById("main-content"))},{react:"react","react-dom":"react-dom"}]},{},[1]);